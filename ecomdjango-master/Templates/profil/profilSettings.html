{% extends 'layouts/base.html' %}



{% block content %}

<style>


    .favorite{
    padding: 20px 0 20px;
    text-align: center;
    color: #FFF;
    }

</style>
<div class="container">

      <!-- Section: Edit Account -->
      <section class="section">
        <!-- First row -->
        <div class="row justify-content-center">
          <!-- First card -->
          <div class="col-lg-4 mb-4">

            <!-- Card -->
            <div class="card ">


              <!-- Card content -->
              <div class="card-body card-body-cascade text-center"
                   style="
                     margin-bottom: 16px;
              ">
                  <button class="hoverable" title="Upload Image" data-toggle="modal" data-target="#uploadimg"
                            style="width:150px;height:150px;float:left;border-radius:50%;margin-right: 0px;padding-left: 0px;
                            padding-right: 0px;padding-bottom: 0px;padding-top: 0px;border-left-width: 0px;border-right-width: 0px;
                            border-bottom-width: 0px;border-top-width: 0px;">

                <div class="view overlay zoom">

                  <img src="{{user.profile.image.url}}"class="z-depth-1 mb-3 mx-auto"
                       style="cursor: pointer; width:150px; height:150px; float:left; border-radius:50%; margin-right:25px;">
                       <div class="mask flex-center">


                          <p style="font-weight: bold;font-size:15px;padding-top: 0px;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;" class="white-text">Upload Image</p>
                       </div>


                </div>
                   </button>

                 <h3 style="padding-top: 45px;">{{user.username}}'s Profile</h3>
                <br />
                <!-- Central Modal Warning Demo-->
              <div  style="z-index: 10000;margin-top: 77px;" class="modal" id="uploadimg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
              aria-hidden="true">
              <div class="modal-dialog modal-notify modal-info" role="document">
              <!--Content-->
              <div class="modal-content">
              <form role="form" method="POST" enctype ="multipart/form-data">  {% csrf_token %}
              <!--Header-->

              <div class="modal-header">
              <p class="heading">Upload Image</p>

              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true" class="white-text">&times;</span>
              </button>
              </div>

              <!--Body-->
              <div class="modal-body">

              <div class="row">
              <div class="col-3 text-center">
                <img src="{{user.profile.image.url}}" alt=""
                  class="img-fluid z-depth-1-half rounded-circle">
                <div style="height: 10px"></div>
                <p class="title mb-0">{{user.profile.first_name}}</p>

              </div>

              <div class="col-9">
                <p>    {{p_form}}</p>
                <p class="card-text" style="font-size:11.5px;">Tips: Upload an image in the JPEG format, less than 2 MB. Your image will be automatically cropped and resized to 100*100 pixels.</p>
              </div>
              </div>

              <!--Footer-->
              <div class="modal-footer justify-content-center">
              <input value="Change" type="submit" class="btn btn-info">
              <a type="button" class="btn btn-outline-info waves-effect" data-dismiss="modal">No, thanks</a>
              </div>
              </form>
              </div>
              <!--/.Content-->
              </div>
           </div>
           <!-- Card content -->
           </div>
           <!-- Central Modal Warning Demo-->
              </div>
            </div>
            <!-- Card -->
              <div class="card card-cascade narrower">



            <a class="btn btn-lighten-3 mdb-color text-white" href="/profile" role="button" > Edit Profile</a>

            <a class="btn btn-lighten-3 mdb-color text-white" href="changepassword" >Change Password</a>

            <a class="text-white btn btn-lighten-3 mdb-color" href=" " role="button" > Payment Info </a>



          </div>
      </div>
      <!-- First card -->

          <div class="col-lg-8 mb-4">

            <!-- Card -->
            <div class="card card-cascade narrower">

              <!-- Card image -->
              <div class="view view-cascade gradient-card-header mdb-color lighten-3">
                <h5 class="mb-0 font-weight-bold favorite">Edit Account</h5>
              </div>
              <!-- Card image -->

              <!-- Card content -->
              <div class="card-body card-body-cascade text-center">

                <!-- Edit Form -->
            <form  method="POST">
                 {% csrf_token %}
                  <!-- First row -->
                  <div class="row">

                    <!-- First column -->
                    <div class="col">
                      <div class="md-form mb-0">
                        <input type="text" id="form1" class="form-control "  name="last_name" value="{{ user.profile.last_name}}" >
                        <label for="form1" >Last Name</label>
                      </div>
                    </div>
                    <!-- Second column -->
                    <div class="col-4">
                      <div class="md-form mb-0">
                        <input type="text" id="form2" class="form-control " name="first_name" value="{{ user.profile.first_name}}">
                        <label for="form2" >First Name</label>
                      </div>
                    </div>
                </div>
                  <!-- Second row -->

                  <div class="row">
                    <!-- First column  -->
                    <div class="col">
                      <div class="md-form mb-0">
                        <input type="text" class="form-control " id="adresseinput" name="adresse" value="{{ user.profile.address }}">
                        <label for="adresseinput">Address</label>
                      </div>
                    </div>
                    <!-- First column  -->
                    <!-- Second column  -->
                    <!-- Second column  -->
                  </div>
                      <!-- Second row -->

                    <!--third row  -->
                   <div class="row">
                   <!-- First column  -->
                   <div class="col" style="margin-top: 25px;">

                     {{p_form.country}}


                     </select>

                   </div>
                   <!-- First column  -->

                   <!-- Second column  -->
                   <div class="col-4">
                     <div class="md-form mb-0">
                       <input type="text" class="form-control " id="cityform" name="city" value="{{ user.profile.city}}">
                       <label for="cityform">City</label>
                     </div>
                   </div>
                   <!-- Second column  -->

                   <!-- third column  -->

                   <!-- third column  -->

                 </div>

                   <!--third row  -->


                  <!-- fourth row -->
  <div class="row">
                    <!-- First column -->
  <div class="col" style="margin-top: 25px;">

    <select class="browser-default custom-select" searchable="Search here.." name="gender" value="{{ user.profile.sex}}">
                      <option value="Male">Male</option>
                      <option value="Female">Female</option>
                      <option value="None">None</option>

    </select>
  </div>



</div>



<br>

                  <!-- Fourth row -->
                  <div class="row">
                    <div class="col-md-12 text-center my-4">
                      <input  type="submit" value="Update Account" class="btn btn-info btn-rounded" onclick="toastr.success('Your information are saved successfully');">
                      <p style="font-size: 12px;" >Delete your account ?  <a href=" " class="blue-text ml-1">click here</a></p>
                    </div>
                  </div>
                  <!-- Fourth row -->

                </form>
                <!-- Edit Form -->

              </div>
              <!-- Card content -->

            </div>
            <!-- Card -->

          </div>
          <!-- Second column -->
 </section>
        </div>
        <!-- First row -->


      <!-- Section: Edit Account -->



{% endblock %}


{% block js %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>



<script type="text/javascript">

toastr.options.showMethod = 'slideDown';
toastr.options.hideMethod = 'slideUp';
toastr.options.closeMethod = 'slideUp';

  $('.mdb-select').materialSelect({
  destroy: true
  });

  $.ajaxSetup({
  headers: {
    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
  }
  });


</script>

{% endblock %}
